!function(){$(function(){$.each($(".menu"),function(){new i($(this))}),$.each($(".hero"),function(){new o($(this))}),$.each($(".site__aside"),function(){new n($(this))}),$.each($(".content"),function(){new e($(this))})});var n=function(n){var e=this,i=n,o=function(){},t=function(){i.perfectScrollbar()},s=function(){i.perfectScrollbar("update")},c=function(){o(),t(),i[0].obj=e};e.updateScroll=function(){s()},c()},e=function(n){var e=n,i=function(){},o=function(){e.perfectScrollbar()},t=function(){i(),o()};t()},i=function(n){var e=n,i=$(".menu-mobile-btn"),o=e.find("a"),t=e.find(".menu__sub-menu"),s=$("body"),c=$(".site"),a=function(){u()},u=function(){c.on("click",function(n){if(o.hasClass("open")&&0==$(n.target).closest(e).length)return o.removeClass("open"),t.css("height",0),!1}),i.on("click",function(){var n=$(this);n.hasClass("close")?l():f()}),o.on("click",function(){var n=$(this),e=$(this).next("div");return n.next().is("div")&&!n.hasClass("open")?(r(n,e),!1):n.next().is("div")&&n.hasClass("open")?(h(n,e),!1):void 0})},f=function(){i.addClass("close"),e.addClass("visible"),s.css("overflow-y","hidden")},l=function(){i.removeClass("close"),e.removeClass("visible"),s.css("overflow-y","auto")},r=function(n,e){var i=n,o=e,t=o.find("ul").outerHeight();i.addClass("open"),o.css("height",t),$(".site__aside")[0].obj.updateScroll()},h=function(n,e){var i=n,o=e;i.removeClass("open"),o.css("height",0)};a()},o=function(n){var e,i=n,o=i.find(".hero__swiper"),t=function(){e=new Swiper(o,{autoplay:1e4,speed:500,effect:"fade",loop:!0})},s=function(){},c=function(){s(),t()};c()}}();
!function(){"use strict";$(function(){$(".validation-form").length&&new t($(".validation-form"))});var t=function(t){var a=t,n=a.find(".contacts__message_error"),s=a.find(".contacts__message_success"),e=a.find(".contacts__message-wrap"),i=a.find("input, textarea"),o=a.find("[data-required]"),l=new XMLHttpRequest,u=function(){r()},c=function(){o.each(function(){var t=$(this);""===t.val()&&(t.addClass("not-touched"),m(t))}),$("#comments__rate-input").hasClass("not-touched")&&$("#comments__rate").addClass("not-valid")},r=function(){o.on({focus:function(){$(this).removeClass("not-touched")},focusout:function(){var t=$(this);m(t)},keyup:function(){var t=$(this);t.hasClass("not-valid")&&m(t)}}),i.on({focusout:function(){var t=0;i.each(function(){var a=$(this);a.val().length>0&&(t+=1)}),0===t&&(i.removeClass("not-valid"),n.removeClass("visible"))}}),a.on({submit:function(){return c(),0!==o.filter(".not-valid").length&&(n.addClass("visible"),e.css("height",n.outerHeight())),o.hasClass("not-touched")||o.hasClass("not-valid")?(a.find(".not-touched:first").focus(),a.find(".not-valid:first").focus(),!1):(d(),!1)}})},d=function(){l=$.ajax({url:$("body").data("mail"),data:{name:$("input[name=name]").val(),email:$("input[name=email]").val(),phone:$("input[name=phone]").val()},dataType:"json",type:"GET",success:function(t){1==t&&(s.addClass("visible"),e.css("height",s.outerHeight()))},error:function(t){"abort"!=t.statusText&&console.log("err")}})},v=function(t){t.addClass("not-valid"),t.removeClass("valid"),$("#comments__rate-input").hasClass("not-valid")&&$("#comments__rate").addClass("not-valid")},f=function(t){t.removeClass("not-valid"),t.addClass("valid")},h=function(t){var a=/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/;return a.test(t)},m=function(t){var a=t.attr("type");t[0].tagName;return("email"!==a&&"text"!==a&&"tel"!==a||""!==t.val())&&("email"!==a||h(t.val()))?(f(t),void(0===o.filter(".not-valid").length&&(n.removeClass("visible"),e.css("height",0)))):(v(t),!1)};u()}}();
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImpxdWVyeS5tYWluLmpzIiwianF1ZXJ5LmZvcm0udmFsaWRhdG9yLmpzIl0sIm5hbWVzIjpbIiQiLCJlYWNoIiwiTWVudSIsInRoaXMiLCJTbGlkZXJzIiwiQXNpZGUiLCJDb250ZW50U2Nyb2xsIiwib2JqIiwiX3NlbGYiLCJfb2JqIiwiX29uRXZlbnRzIiwiX2luaXRTY3JvbGwiLCJwZXJmZWN0U2Nyb2xsYmFyIiwiX3VwZGF0ZVNjcm9sbCIsIl9pbml0IiwidXBkYXRlU2Nyb2xsIiwiX2J0biIsIl9tZW51TGluayIsImZpbmQiLCJfbWVudVN1Yk1lbnUiLCJfYm9keSIsIl9zaXRlIiwiX2NvbnN0cnVjdG9yIiwib24iLCJlIiwiaGFzQ2xhc3MiLCJ0YXJnZXQiLCJjbG9zZXN0IiwibGVuZ3RoIiwicmVtb3ZlQ2xhc3MiLCJjc3MiLCJjdXJCdG4iLCJfY2xvc2VNZW51IiwiX29wZW5NZW51IiwiY3VyTGluayIsImN1clN1Yk1lbnUiLCJuZXh0IiwiaXMiLCJfb3BlblN1Yk1lbnUiLCJfY2xvc2VTdWJNZW51IiwiYWRkQ2xhc3MiLCJidG4iLCJzdWJNZW51IiwiY3VyU3ViTWVudUhlaWdodCIsIm91dGVySGVpZ2h0IiwiX2hlcm8iLCJfaGVyb1NsaWRlciIsIl9pbml0U2xpZGVyIiwiU3dpcGVyIiwiYXV0b3BsYXkiLCJzcGVlZCIsImVmZmVjdCIsImxvb3AiLCJfb25FdmVudCIsIl9jb25zdHJ1Y3QiLCJGb3JtVmFsaWRhdG9yIiwiX25vdGUiLCJfbm90ZVN1Y2Nlc3MiLCJfbm90ZVdyYXAiLCJfaW5wdXRzIiwiX2ZpZWxkcyIsIl9yZXF1ZXN0IiwiWE1MSHR0cFJlcXVlc3QiLCJfYWRkTm90VG91Y2hlZENsYXNzIiwiY3VySXRlbSIsInZhbCIsIl92YWxpZGF0ZUZpZWxkIiwiZm9jdXMiLCJmb2N1c291dCIsImtleXVwIiwibGV0dGVyQ291bnRlciIsInN1Ym1pdCIsImZpbHRlciIsIl9hamF4UmVxdWVzdCIsImFqYXgiLCJ1cmwiLCJkYXRhIiwibmFtZSIsImVtYWlsIiwicGhvbmUiLCJkYXRhVHlwZSIsInR5cGUiLCJzdWNjZXNzIiwiZXJyb3IiLCJzdGF0dXNUZXh0IiwiY29uc29sZSIsImxvZyIsIl9tYWtlTm90VmFsaWQiLCJmaWVsZCIsIl9tYWtlVmFsaWQiLCJfdmFsaWRhdGVFbWFpbCIsInJlIiwidGVzdCIsImF0dHIiLCJ0YWdOYW1lIl0sIm1hcHBpbmdzIjoiQ0FBQSxXQUVJQSxFQUFHLFdBRUNBLEVBQUVDLEtBQU1ELEVBQUcsU0FBVyxXQUNsQixHQUFJRSxHQUFPRixFQUFHRyxTQUdsQkgsRUFBRUMsS0FBTUQsRUFBRyxTQUFXLFdBQ2xCLEdBQUlJLEdBQVVKLEVBQUdHLFNBR3JCSCxFQUFFQyxLQUFNRCxFQUFHLGdCQUFrQixXQUV6QixHQUFJSyxHQUFRTCxFQUFHRyxTQUluQkgsRUFBRUMsS0FBTUQsRUFBRyxZQUFjLFdBRXJCLEdBQUlNLEdBQWdCTixFQUFHRyxVQU0vQixJQUFJRSxHQUFRLFNBQVVFLEdBRWxCLEdBQUlDLEdBQVFMLEtBQ1JNLEVBQU9GLEVBRVBHLEVBQVksYUFHWkMsRUFBYyxXQUVWRixFQUFLRyxvQkFHVEMsRUFBZ0IsV0FFWkosRUFBS0csaUJBQWtCLFdBRzNCRSxFQUFRLFdBRUpKLElBQ0FDLElBQ0FGLEVBQUssR0FBR0YsSUFBTUMsRUFLdEJBLEdBQU1PLGFBQWUsV0FDakJGLEtBR0pDLEtBSUFSLEVBQWdCLFNBQVVDLEdBRTFCLEdBQUlFLEdBQU9GLEVBRVBHLEVBQVksYUFHWkMsRUFBYyxXQUVWRixFQUFLRyxvQkFHVEUsRUFBUSxXQUVKSixJQUNBQyxJQUlSRyxNQUlBWixFQUFPLFNBQVVLLEdBR2pCLEdBQUlFLEdBQU9GLEVBQ1BTLEVBQU9oQixFQUFHLG9CQUNWaUIsRUFBWVIsRUFBS1MsS0FBTSxLQUN2QkMsRUFBZVYsRUFBS1MsS0FBTSxtQkFDMUJFLEVBQVFwQixFQUFHLFFBQ1hxQixFQUFRckIsRUFBRyxTQUdYc0IsRUFBZSxXQUNYWixLQUVKQSxFQUFZLFdBRVJXLEVBQU1FLEdBQ0YsUUFBUyxT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YixHQUE2QixTQUFUQSxHQUE2QixRQUFUQSxHQUVwQixLQUFoQk8sRUFBTXZCLFNBT0QsVUFBVGdCLEdBQ0tTLEVBQWdCRixFQUFNdkIsU0FNL0J3QixFQUFZRCxRQUVrQyxJQUExQzVCLEVBQVFZLE9BQVEsY0FBZTVDLFNBRS9CNEIsRUFBTTNCLFlBQVksV0FDbEI2QixFQUFVNUIsSUFBSyxTQUFVLE9BbEJyQnlELEVBQWVDLElBQ1IsR0F5QnZCbEUiLCJmaWxlIjoiY29udGFjdC5taW4uanMiLCJzb3VyY2VzQ29udGVudCI6WyIoIGZ1bmN0aW9uKCl7XHJcblxyXG4gICAgJCggZnVuY3Rpb24oKXtcclxuXHJcbiAgICAgICAgJC5lYWNoKCAkKCAnLm1lbnUnICksIGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICBuZXcgTWVudSAoICQoIHRoaXMgKSApO1xyXG4gICAgICAgIH0gKTtcclxuXHJcbiAgICAgICAgJC5lYWNoKCAkKCAnLmhlcm8nICksIGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICBuZXcgU2xpZGVycyAoICQoIHRoaXMgKSApO1xyXG4gICAgICAgIH0gKTtcclxuXHJcbiAgICAgICAgJC5lYWNoKCAkKCAnLnNpdGVfX2FzaWRlJyApLCBmdW5jdGlvbigpe1xyXG5cclxuICAgICAgICAgICAgbmV3IEFzaWRlICggJCggdGhpcyApIClcclxuXHJcbiAgICAgICAgfSApO1xyXG5cclxuICAgICAgICAkLmVhY2goICQoICcuY29udGVudCcgKSwgZnVuY3Rpb24oKXtcclxuXHJcbiAgICAgICAgICAgIG5ldyBDb250ZW50U2Nyb2xsICggJCggdGhpcyApIClcclxuXHJcbiAgICAgICAgfSApO1xyXG5cclxuICAgIH0gKTtcclxuXHJcbiAgICB2YXIgQXNpZGUgPSBmdW5jdGlvbiggb2JqICkge1xyXG5cclxuICAgICAgICB2YXIgX3NlbGYgPSB0aGlzLFxyXG4gICAgICAgICAgICBfb2JqID0gb2JqO1xyXG5cclxuICAgICAgICB2YXIgX29uRXZlbnRzID0gZnVuY3Rpb24gKCkge1xyXG5cclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgX2luaXRTY3JvbGwgPSBmdW5jdGlvbiAoKSB7XHJcblxyXG4gICAgICAgICAgICAgICAgX29iai5wZXJmZWN0U2Nyb2xsYmFyKCApO1xyXG5cclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgX3VwZGF0ZVNjcm9sbCA9IGZ1bmN0aW9uICgpIHtcclxuXHJcbiAgICAgICAgICAgICAgICBfb2JqLnBlcmZlY3RTY3JvbGxiYXIoICd1cGRhdGUnICk7XHJcblxyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICBfaW5pdCA9IGZ1bmN0aW9uICgpIHtcclxuXHJcbiAgICAgICAgICAgICAgICBfb25FdmVudHMoKTtcclxuICAgICAgICAgICAgICAgIF9pbml0U2Nyb2xsKCk7XHJcbiAgICAgICAgICAgICAgICBfb2JqWzBdLm9iaiA9IF9zZWxmO1xyXG5cclxuICAgICAgICAgICAgfTtcclxuXHJcbiAgICAgICAgLy9wdWJsaWMgbWV0aG9kc1xyXG4gICAgICAgIF9zZWxmLnVwZGF0ZVNjcm9sbCA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgX3VwZGF0ZVNjcm9sbCgpO1xyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgIF9pbml0KCk7XHJcblxyXG4gICAgfTtcclxuXHJcbiAgICB2YXIgQ29udGVudFNjcm9sbCA9IGZ1bmN0aW9uKCBvYmogKSB7XHJcblxyXG4gICAgICAgIHZhciBfb2JqID0gb2JqO1xyXG5cclxuICAgICAgICB2YXIgX29uRXZlbnRzID0gZnVuY3Rpb24gKCkge1xyXG5cclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgX2luaXRTY3JvbGwgPSBmdW5jdGlvbiAoKSB7XHJcblxyXG4gICAgICAgICAgICAgICAgX29iai5wZXJmZWN0U2Nyb2xsYmFyKCApO1xyXG5cclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgX2luaXQgPSBmdW5jdGlvbiAoKSB7XHJcblxyXG4gICAgICAgICAgICAgICAgX29uRXZlbnRzKCk7XHJcbiAgICAgICAgICAgICAgICBfaW5pdFNjcm9sbCgpO1xyXG5cclxuICAgICAgICAgICAgfTtcclxuXHJcbiAgICAgICAgX2luaXQoKTtcclxuXHJcbiAgICB9O1xyXG5cclxuICAgIHZhciBNZW51ID0gZnVuY3Rpb24oIG9iaiApe1xyXG5cclxuICAgICAgICAvL3ByaXZhdGUgcHJvcGVydGllc1xyXG4gICAgICAgIHZhciBfb2JqID0gb2JqLFxyXG4gICAgICAgICAgICBfYnRuID0gJCggJy5tZW51LW1vYmlsZS1idG4nICksXHJcbiAgICAgICAgICAgIF9tZW51TGluayA9IF9vYmouZmluZCggJ2EnICksXHJcbiAgICAgICAgICAgIF9tZW51U3ViTWVudSA9IF9vYmouZmluZCggJy5tZW51X19zdWItbWVudScgKSxcclxuICAgICAgICAgICAgX2JvZHkgPSAkKCAnYm9keScgKSxcclxuICAgICAgICAgICAgX3NpdGUgPSAkKCAnLnNpdGUnICk7XHJcblxyXG4gICAgICAgIC8vcHJpdmF0ZSBtZXRob2RzXHJcbiAgICAgICAgdmFyIF9jb25zdHJ1Y3RvciA9IGZ1bmN0aW9uKCl7XHJcbiAgICAgICAgICAgICAgICBfb25FdmVudHMoKTtcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgX29uRXZlbnRzID0gZnVuY3Rpb24oKXtcclxuXHJcbiAgICAgICAgICAgICAgICBfc2l0ZS5vbihcclxuICAgICAgICAgICAgICAgICAgICAnY2xpY2snLCBmdW5jdGlvbiAoIGUgKSB7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoIF9tZW51TGluay5oYXNDbGFzcyggJ29wZW4nICkgJiYgJCggZS50YXJnZXQgKS5jbG9zZXN0KCBfb2JqICkubGVuZ3RoID09IDAgKXtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBfbWVudUxpbmsucmVtb3ZlQ2xhc3MoICdvcGVuJyApO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgX21lbnVTdWJNZW51LmNzcyggJ2hlaWdodCcsIDAgKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgKTtcclxuXHJcbiAgICAgICAgICAgICAgICBfYnRuLm9uKCAnY2xpY2snLCBmdW5jdGlvbigpIHtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIGN1ckJ0biA9ICQoIHRoaXMgKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKCBjdXJCdG4uaGFzQ2xhc3MoICdjbG9zZScgKSApe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBfY2xvc2VNZW51KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgX29wZW5NZW51KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIH0gKTtcclxuXHJcbiAgICAgICAgICAgICAgICBfbWVudUxpbmsub24oICdjbGljaycsIGZ1bmN0aW9uKCkge1xyXG5cclxuICAgICAgICAgICAgICAgICAgICB2YXIgY3VyTGluayA9ICQoIHRoaXMgKSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgY3VyU3ViTWVudSA9ICQoIHRoaXMgKS5uZXh0KCAnZGl2JyApO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICBpZiAoIGN1ckxpbmsubmV4dCgpLmlzKCAnZGl2JyApICYmICFjdXJMaW5rLmhhc0NsYXNzKCAnb3BlbicgKSApe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBfb3BlblN1Yk1lbnUoIGN1ckxpbmssIGN1clN1Yk1lbnUgKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoIGN1ckxpbmsubmV4dCgpLmlzKCAnZGl2JyApICYmIGN1ckxpbmsuaGFzQ2xhc3MoICdvcGVuJyApICkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBfY2xvc2VTdWJNZW51KCBjdXJMaW5rLCBjdXJTdWJNZW51ICk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgfSApO1xyXG5cclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgX29wZW5NZW51ID0gZnVuY3Rpb24oKXtcclxuICAgICAgICAgICAgICAgIF9idG4uYWRkQ2xhc3MoICdjbG9zZScgKTtcclxuICAgICAgICAgICAgICAgIF9vYmouYWRkQ2xhc3MoICd2aXNpYmxlJyApO1xyXG4gICAgICAgICAgICAgICAgX2JvZHkuY3NzKCAnb3ZlcmZsb3cteScsICdoaWRkZW4nICk7XHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIF9jbG9zZU1lbnUgPSBmdW5jdGlvbigpe1xyXG4gICAgICAgICAgICAgICAgX2J0bi5yZW1vdmVDbGFzcyggJ2Nsb3NlJyApO1xyXG4gICAgICAgICAgICAgICAgX29iai5yZW1vdmVDbGFzcyggJ3Zpc2libGUnICk7XHJcbiAgICAgICAgICAgICAgICBfYm9keS5jc3MoICdvdmVyZmxvdy15JywgJ2F1dG8nICk7XHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIF9vcGVuU3ViTWVudSA9IGZ1bmN0aW9uICggYnRuLCBzdWJNZW51ICkge1xyXG5cclxuICAgICAgICAgICAgICAgIHZhciBjdXJCdG4gPSBidG4sXHJcbiAgICAgICAgICAgICAgICAgICAgY3VyU3ViTWVudSA9IHN1Yk1lbnUsXHJcbiAgICAgICAgICAgICAgICAgICAgY3VyU3ViTWVudUhlaWdodCA9IGN1clN1Yk1lbnUuZmluZCggJ3VsJyApLm91dGVySGVpZ2h0KCk7XHJcblxyXG4gICAgICAgICAgICAgICAgY3VyQnRuLmFkZENsYXNzKCAnb3BlbicgKTtcclxuICAgICAgICAgICAgICAgIGN1clN1Yk1lbnUuY3NzKCAnaGVpZ2h0JywgY3VyU3ViTWVudUhlaWdodCApO1xyXG5cclxuICAgICAgICAgICAgICAgICQoICcuc2l0ZV9fYXNpZGUnIClbMF0ub2JqLnVwZGF0ZVNjcm9sbCgpO1xyXG5cclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgX2Nsb3NlU3ViTWVudSA9IGZ1bmN0aW9uICggYnRuLCBzdWJNZW51ICkge1xyXG5cclxuICAgICAgICAgICAgICAgIHZhciBjdXJCdG4gPSBidG4sXHJcbiAgICAgICAgICAgICAgICAgICAgY3VyU3ViTWVudSA9IHN1Yk1lbnU7XHJcblxyXG4gICAgICAgICAgICAgICAgY3VyQnRuLnJlbW92ZUNsYXNzKCAnb3BlbicgKTtcclxuICAgICAgICAgICAgICAgIGN1clN1Yk1lbnUuY3NzKCAnaGVpZ2h0JywgMCApO1xyXG5cclxuICAgICAgICAgICAgfTtcclxuXHJcbiAgICAgICAgLy9wdWJsaWMgcHJvcGVydGllc1xyXG5cclxuICAgICAgICAvL3B1YmxpYyBtZXRob2RzXHJcblxyXG4gICAgICAgIF9jb25zdHJ1Y3RvcigpO1xyXG5cclxuICAgIH07XHJcblxyXG4gICAgdmFyIFNsaWRlcnMgPSBmdW5jdGlvbiggb2JqICkge1xyXG5cclxuICAgICAgICAvL3ByaXZhdGUgcHJvcGVydGllc1xyXG4gICAgICAgIHZhciBfb2JqID0gb2JqLFxyXG4gICAgICAgICAgICBfaGVyb1NsaWRlciA9IF9vYmouZmluZCggJy5oZXJvX19zd2lwZXInICksXHJcbiAgICAgICAgICAgIF9oZXJvO1xyXG5cclxuICAgICAgICAvL3ByaXZhdGUgbWV0aG9kc1xyXG4gICAgICAgIHZhciBfaW5pdFNsaWRlciA9IGZ1bmN0aW9uKCkge1xyXG5cclxuICAgICAgICAgICAgICAgIF9oZXJvID0gbmV3IFN3aXBlciAoIF9oZXJvU2xpZGVyLCB7XHJcbiAgICAgICAgICAgICAgICAgICAgYXV0b3BsYXk6IDEwMDAwLFxyXG4gICAgICAgICAgICAgICAgICAgIHNwZWVkOiA1MDAsXHJcbiAgICAgICAgICAgICAgICAgICAgZWZmZWN0OiAnZmFkZScsXHJcbiAgICAgICAgICAgICAgICAgICAgbG9vcDogdHJ1ZVxyXG4gICAgICAgICAgICAgICAgfSApO1xyXG5cclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgX29uRXZlbnQgPSBmdW5jdGlvbigpIHtcclxuXHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIF9jb25zdHJ1Y3QgPSBmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgICAgIF9vbkV2ZW50KCk7XHJcbiAgICAgICAgICAgICAgICBfaW5pdFNsaWRlcigpO1xyXG4gICAgICAgICAgICB9O1xyXG5cclxuICAgICAgICAvL3B1YmxpYyBwcm9wZXJ0aWVzXHJcblxyXG4gICAgICAgIC8vcHVibGljIG1ldGhvZHNcclxuXHJcbiAgICAgICAgX2NvbnN0cnVjdCgpO1xyXG4gICAgfTtcclxuXHJcbn0gKSgpOyIsIiggZnVuY3Rpb24oKXtcclxuXHJcbiAgICBcInVzZSBzdHJpY3RcIjtcclxuXHJcbiAgICAkKCBmdW5jdGlvbigpe1xyXG5cclxuICAgICAgICBpZiAoICQoICcudmFsaWRhdGlvbi1mb3JtJyApLmxlbmd0aCApe1xyXG4gICAgICAgICAgICBuZXcgRm9ybVZhbGlkYXRvciggJCggJy52YWxpZGF0aW9uLWZvcm0nICkgKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgfSApO1xyXG5cclxuICAgIHZhciBGb3JtVmFsaWRhdG9yID0gZnVuY3Rpb24gKG9iaikge1xyXG5cclxuICAgICAgICAvL3ByaXZhdGUgcHJvcGVydGllc1xyXG4gICAgICAgIHZhciBfb2JqID0gb2JqLFxyXG4gICAgICAgICAgICBfbm90ZSA9IF9vYmouZmluZCggJy5jb250YWN0c19fbWVzc2FnZV9lcnJvcicgKSxcclxuICAgICAgICAgICAgX25vdGVTdWNjZXNzID0gX29iai5maW5kKCAnLmNvbnRhY3RzX19tZXNzYWdlX3N1Y2Nlc3MnICksXHJcbiAgICAgICAgICAgIF9ub3RlV3JhcCA9IF9vYmouZmluZCggJy5jb250YWN0c19fbWVzc2FnZS13cmFwJyApLFxyXG4gICAgICAgICAgICBfaW5wdXRzID0gX29iai5maW5kKCAnaW5wdXQsIHRleHRhcmVhJyApLFxyXG4gICAgICAgICAgICBfZmllbGRzID0gX29iai5maW5kKCAnW2RhdGEtcmVxdWlyZWRdJyApLFxyXG4gICAgICAgICAgICBfcmVxdWVzdCA9IG5ldyBYTUxIdHRwUmVxdWVzdCgpO1xyXG5cclxuICAgICAgICAvL3ByaXZhdGUgbWV0aG9kc1xyXG4gICAgICAgIHZhciBfY29uc3RydWN0b3IgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICBfb25FdmVudHMoKTtcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgX2FkZE5vdFRvdWNoZWRDbGFzcyA9IGZ1bmN0aW9uICgpIHtcclxuXHJcbiAgICAgICAgICAgICAgICBfZmllbGRzLmVhY2goIGZ1bmN0aW9uKCkge1xyXG5cclxuICAgICAgICAgICAgICAgICAgICB2YXIgY3VySXRlbSA9ICQodGhpcyk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGlmKCBjdXJJdGVtLnZhbCgpID09PSAnJyApe1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgY3VySXRlbS5hZGRDbGFzcyggJ25vdC10b3VjaGVkJyApO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgX3ZhbGlkYXRlRmllbGQoIGN1ckl0ZW0gKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIH0gKTtcclxuICAgICAgICAgICAgICAgIF9ub3RlV3JhcFxyXG4gICAgICAgICAgICAgICAgaWYgKCAkKCAnI2NvbW1lbnRzX19yYXRlLWlucHV0JyApLmhhc0NsYXNzKCAnbm90LXRvdWNoZWQnICkgKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgJCggJyNjb21tZW50c19fcmF0ZScgKS5hZGRDbGFzcyggJ25vdC12YWxpZCcgKTtcclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIF9vbkV2ZW50cyA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgIF9maWVsZHMub24oIHtcclxuICAgICAgICAgICAgICAgICAgICBmb2N1czogZnVuY3Rpb24oKSB7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAkKCB0aGlzICkucmVtb3ZlQ2xhc3MoICdub3QtdG91Y2hlZCcgKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgICAgICBmb2N1c291dDogZnVuY3Rpb24oKSB7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgY3VySXRlbSA9ICQodGhpcyk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICBfdmFsaWRhdGVGaWVsZCggY3VySXRlbSApO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgICAgIGtleXVwOiBmdW5jdGlvbiAoKSB7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgY3VySXRlbSA9ICQodGhpcyk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoIGN1ckl0ZW0uaGFzQ2xhc3MoICdub3QtdmFsaWQnICkgKXtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIF92YWxpZGF0ZUZpZWxkKCBjdXJJdGVtICk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfSApO1xyXG4gICAgICAgICAgICAgICAgX2lucHV0cy5vbigge1xyXG4gICAgICAgICAgICAgICAgICAgIGZvY3Vzb3V0OiBmdW5jdGlvbigpIHtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBsZXR0ZXJDb3VudGVyID0gMDtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIF9pbnB1dHMuZWFjaCggZnVuY3Rpb24gKCkge1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBjdXJJdGVtID0gJCh0aGlzKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoIGN1ckl0ZW0udmFsKCkubGVuZ3RoID4gMCApe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxldHRlckNvdW50ZXIgPSBsZXR0ZXJDb3VudGVyICsgMVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgfSApO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCBsZXR0ZXJDb3VudGVyID09PSAwICkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgX2lucHV0cy5yZW1vdmVDbGFzcyggJ25vdC12YWxpZCcgKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIF9ub3RlLnJlbW92ZUNsYXNzKCd2aXNpYmxlJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfSApO1xyXG4gICAgICAgICAgICAgICAgX29iai5vbigge1xyXG4gICAgICAgICAgICAgICAgICAgIHN1Ym1pdDogZnVuY3Rpb24oKSB7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICBfYWRkTm90VG91Y2hlZENsYXNzKCk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiggIShfZmllbGRzLmZpbHRlciggJy5ub3QtdmFsaWQnICkubGVuZ3RoID09PSAwKSApIHtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBfbm90ZS5hZGRDbGFzcygndmlzaWJsZScpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgX25vdGVXcmFwLmNzcyggJ2hlaWdodCcsIF9ub3RlLm91dGVySGVpZ2h0KCkgKVxyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYoIF9maWVsZHMuaGFzQ2xhc3MoJ25vdC10b3VjaGVkJykgfHwgX2ZpZWxkcy5oYXNDbGFzcygnbm90LXZhbGlkJykgKSB7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgX29iai5maW5kKCcubm90LXRvdWNoZWQ6Zmlyc3QnKS5mb2N1cygpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgX29iai5maW5kKCcubm90LXZhbGlkOmZpcnN0JykuZm9jdXMoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBfYWpheFJlcXVlc3QoKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH0gKTtcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgX2FqYXhSZXF1ZXN0ID0gZnVuY3Rpb24oKXtcclxuXHJcbiAgICAgICAgICAgICAgICBfcmVxdWVzdCA9ICQuYWpheCgge1xyXG4gICAgICAgICAgICAgICAgICAgIHVybDogJCggJ2JvZHknICkuZGF0YSggJ21haWwnICksXHJcbiAgICAgICAgICAgICAgICAgICAgZGF0YToge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBuYW1lOiAkKCAnaW5wdXRbbmFtZT1uYW1lXScgKS52YWwoKSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgZW1haWw6ICQoICdpbnB1dFtuYW1lPWVtYWlsXScgKS52YWwoKSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgcGhvbmU6ICQoICdpbnB1dFtuYW1lPXBob25lXScgKS52YWwoKVxyXG4gICAgICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICAgICAgZGF0YVR5cGU6ICdqc29uJyxcclxuICAgICAgICAgICAgICAgICAgICB0eXBlOiAnR0VUJyxcclxuICAgICAgICAgICAgICAgICAgICBzdWNjZXNzOiBmdW5jdGlvbiAoIGRhdGEgKSB7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoIGRhdGEgPT0gMSApe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgX25vdGVTdWNjZXNzLmFkZENsYXNzKCd2aXNpYmxlJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBfbm90ZVdyYXAuY3NzKCAnaGVpZ2h0JywgX25vdGVTdWNjZXNzLm91dGVySGVpZ2h0KCkgKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgICAgICBlcnJvcjogZnVuY3Rpb24gKCBYTUxIdHRwUmVxdWVzdCApIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCBYTUxIdHRwUmVxdWVzdC5zdGF0dXNUZXh0ICE9IFwiYWJvcnRcIiApIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCAnZXJyJyApO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfSApO1xyXG5cclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgX21ha2VOb3RWYWxpZCA9IGZ1bmN0aW9uICggZmllbGQgKSB7XHJcbiAgICAgICAgICAgICAgICBmaWVsZC5hZGRDbGFzcyggJ25vdC12YWxpZCcgKTtcclxuICAgICAgICAgICAgICAgIGZpZWxkLnJlbW92ZUNsYXNzKCAndmFsaWQnICk7XHJcblxyXG4gICAgICAgICAgICAgICAgaWYgKCAkKCAnI2NvbW1lbnRzX19yYXRlLWlucHV0JyApLmhhc0NsYXNzKCAnbm90LXZhbGlkJyApICkge1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAkKCAnI2NvbW1lbnRzX19yYXRlJyApLmFkZENsYXNzKCAnbm90LXZhbGlkJyApO1xyXG5cclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIF9tYWtlVmFsaWQgPSBmdW5jdGlvbiAoIGZpZWxkICkge1xyXG4gICAgICAgICAgICAgICAgZmllbGQucmVtb3ZlQ2xhc3MoICdub3QtdmFsaWQnICk7XHJcbiAgICAgICAgICAgICAgICBmaWVsZC5hZGRDbGFzcyggJ3ZhbGlkJyApO1xyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICBfdmFsaWRhdGVFbWFpbCA9IGZ1bmN0aW9uICggZW1haWwgKSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgcmUgPSAvXigoW148PigpXFxbXFxdXFxcXC4sOzpcXHNAXCJdKyhcXC5bXjw+KClcXFtcXF1cXFxcLiw7Olxcc0BcIl0rKSopfChcIi4rXCIpKUAoKFxcW1swLTldezEsM31cXC5bMC05XXsxLDN9XFwuWzAtOV17MSwzfVxcLlswLTldezEsM31dKXwoKFthLXpBLVpcXC0wLTldK1xcLikrW2EtekEtWl17Mix9KSkkLztcclxuICAgICAgICAgICAgICAgIHJldHVybiByZS50ZXN0KGVtYWlsKTtcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgX3ZhbGlkYXRlRmllbGQgPSBmdW5jdGlvbiAoIGZpZWxkICkge1xyXG4gICAgICAgICAgICAgICAgdmFyIHR5cGUgPSBmaWVsZC5hdHRyKCAndHlwZScpLFxyXG4gICAgICAgICAgICAgICAgICAgIHRhZ05hbWUgPSBmaWVsZFswXS50YWdOYW1lO1xyXG5cclxuICAgICAgICAgICAgICAgIGlmKCB0eXBlID09PSAnZW1haWwnIHx8IHR5cGUgPT09ICd0ZXh0JyAgfHwgdHlwZSA9PT0gJ3RlbCcgKXtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgaWYoIGZpZWxkLnZhbCgpID09PSAnJyApe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBfbWFrZU5vdFZhbGlkKCBmaWVsZCApO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICBpZiggdHlwZSA9PT0gJ2VtYWlsJyApe1xyXG4gICAgICAgICAgICAgICAgICAgIGlmKCAhX3ZhbGlkYXRlRW1haWwoIGZpZWxkLnZhbCgpICkgKXtcclxuICAgICAgICAgICAgICAgICAgICAgICAgX21ha2VOb3RWYWxpZCggZmllbGQgKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICBfbWFrZVZhbGlkKCBmaWVsZCApO1xyXG5cclxuICAgICAgICAgICAgICAgIGlmKCBfZmllbGRzLmZpbHRlciggJy5ub3QtdmFsaWQnICkubGVuZ3RoID09PSAwICkge1xyXG5cclxuICAgICAgICAgICAgICAgICAgICBfbm90ZS5yZW1vdmVDbGFzcygndmlzaWJsZScpO1xyXG4gICAgICAgICAgICAgICAgICAgIF9ub3RlV3JhcC5jc3MoICdoZWlnaHQnLCAwIClcclxuXHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICB9O1xyXG5cclxuICAgICAgICAvL3B1YmxpYyBwcm9wZXJ0aWVzXHJcblxyXG4gICAgICAgIF9jb25zdHJ1Y3RvcigpO1xyXG4gICAgfTtcclxuXHJcbn0gKSgpOyJdfQ==
