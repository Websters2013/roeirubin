!function(){$(function(){$.each($(".menu"),function(){new i($(this))}),$.each($(".hero"),function(){new o($(this))}),$.each($(".site__aside"),function(){new n($(this))}),$.each($(".content"),function(){new e($(this))})});var n=function(n){var e=this,i=n,o=function(){},t=function(){i.perfectScrollbar()},s=function(){i.perfectScrollbar("update")},c=function(){o(),t(),i[0].obj=e};e.updateScroll=function(){s()},c()},e=function(n){var e=n,i=function(){},o=function(){e.perfectScrollbar()},t=function(){i(),o()};t()},i=function(n){var e=n,i=$(".menu-mobile-btn"),o=e.find("a"),t=e.find(".menu__sub-menu"),s=$("body"),c=$(".site"),a=function(){u()},u=function(){c.on("click",function(n){if(o.hasClass("open")&&0==$(n.target).closest(e).length)return o.removeClass("open"),t.css("height",0),!1}),i.on("click",function(){var n=$(this);n.hasClass("close")?l():f()}),o.on("click",function(){var n=$(this),e=$(this).next("div");return n.next().is("div")&&!n.hasClass("open")?(r(n,e),!1):n.next().is("div")&&n.hasClass("open")?(h(n,e),!1):void 0})},f=function(){i.addClass("close"),e.addClass("visible"),s.css("overflow-y","hidden")},l=function(){i.removeClass("close"),e.removeClass("visible"),s.css("overflow-y","auto")},r=function(n,e){var i=n,o=e,t=o.find("ul").outerHeight();i.addClass("open"),o.css("height",t),$(".site__aside")[0].obj.updateScroll()},h=function(n,e){var i=n,o=e;i.removeClass("open"),o.css("height",0)};a()},o=function(n){var e,i=n,o=i.find(".hero__swiper"),t=function(){e=new Swiper(o,{autoplay:1e4,speed:500,effect:"fade",loop:!0})},s=function(){},c=function(){s(),t()};c()}}();
!function(){"use strict";$(function(){$.each($(".media-gallery_view"),function(){new i($(this))})});var i=function(i){var t=i,e=function(){t.on("click",".media-gallery__item",function(){return n($(this),$(this).index()),!1})},s=function(){e()};s()},n=function(i,n){var t=this,e=i,s=$("body"),a=e.parent(),o=e.parents(".media-gallery"),d=$("html"),l=$(window),c=a.find(".media-gallery__item"),r=null,p=null,u=null,h=null,f=null,w=null,v=null,g=null,m=null,_=function(){l.on({resize:function(){P()}}),p.parent().on({click:function(){k()}}),p.on({click:function(i){i.stopPropagation()}}),u.on({click:function(){return k(),!1}})},b=function(){o.attr("data-loaded-type");r=$('<div class="swiper-popup">                                    <div class="swiper-container">                                        <div class="swiper-wrapper"></div>                                        <div class="swiper-pagination"></div>                                        <div class="swiper-button-next"></div>                                        <div class="swiper-button-prev"></div>                                    </div>                                </div>'),h=r.find(".swiper-wrapper"),f=r.find(".swiper-container"),w=r.find(".swiper-pagination"),v=r.find(".swiper-button-next"),g=r.find(".swiper-button-prev")},y=function(){b(),C(),R(),m.slideTo(n,0),r.addClass("active"),T(),m.onResize()},k=function(){r.removeClass("active"),setTimeout(function(){d.css({overflow:"",paddingRight:""}),r.remove()},300)},C=function(){$.each(c,function(){var i=null,n=null,t=null;t="",i='<img src="'+$(this).attr("href")+'">',n="";var e=$('<div class="swiper-slide">                                        <div class="swiper-popup__inner" '+n+'>                                            <a href="#" class="swiper-popup__close"></a>                                            '+t+"                                            "+i+'                                            <span class="swiper-slide__title">'+$(this).data("title")+"</span>                                        </div>                                    </div>");h.append(e),e.find("img").on({load:function(){$(this).attr("data-width",this.width),$(this).attr("data-height",this.height),B(this.width,this.height,$(this))}})}),s.append(r),p=r.find(".swiper-popup__inner"),u=r.find(".swiper-popup__close")},x=function(){var i=document.createElement("div"),n=null;return document.body.appendChild(i),n=i.offsetWidth-i.clientWidth,document.body.removeChild(i),n},R=function(){m=new Swiper(f,{pagination:w,nextButton:v,prevButton:g,slidesPerView:1,paginationClickable:!0})},z=function(){y(),_(),e[0].obj=t},B=function(i,n,t){var e=0;e=r.width()/i>r.height()/n?r.height()/n:r.width()/i,e>=1?t.css({width:.85*i,height:.85*n}):t.css({width:e*i*.85,height:e*n*.85})},P=function(){$.each(h.find("img"),function(){B($(this).data("width"),$(this).data("height"),$(this))})},T=function(){d.css({overflow:"hidden",paddingRight:x()})};z()}}();
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImpxdWVyeS5tYWluLmpzIiwianF1ZXJ5Lm1lZGlhLWdhbGxlcnkuanMiXSwibmFtZXMiOlsiJCIsImVhY2giLCJNZW51IiwidGhpcyIsIlNsaWRlcnMiLCJBc2lkZSIsIkNvbnRlbnRTY3JvbGwiLCJvYmoiLCJfc2VsZiIsIl9vYmoiLCJfb25FdmVudHMiLCJfaW5pdFNjcm9sbCIsInBlcmZlY3RTY3JvbGxiYXIiLCJfdXBkYXRlU2Nyb2xsIiwiX2luaXQiLCJ1cGRhdGVTY3JvbGwiLCJfYnRuIiwiX21lbnVMaW5rIiwiZmluZCIsIl9tZW51U3ViTWVudSIsIl9ib2R5IiwiX3NpdGUiLCJfY29uc3RydWN0b3IiLCJvbiIsImUiLCJoYXNDbGFzcyIsInRhcmdldCIsImNsb3Nlc3QiLCJsZW5ndGgiLCJyZW1vdmVDbGFzcyIsImNzcyIsImN1ckJ0biIsIl9jbG9zZU1lbnUiLCJfb3Blbk1lbnUiLCJjdXJMaW5rIiwiY3VyU3ViTWVudSIsIm5leHQiLCJpcyIsIl9vcGVuU3ViTWVudSIsIl9jbG9zZVN1Yk1lbnUiLCJhZGRDbGFzcyIsImJ0biIsInN1Yk1lbnUiLCJjdXJTdWJNZW51SGVpZ2h0Iiwib3V0ZXJIZWlnaHQiLCJfaGVybyIsIl9oZXJvU2xpZGVyIiwiX2luaXRTbGlkZXIiLCJTd2lwZXIiLCJhdXRvcGxheSIsInNwZWVkIiwiZWZmZWN0IiwibG9vcCIsIl9vbkV2ZW50IiwiX2NvbnN0cnVjdCIsIk1lZGlhR2FsbGVyeSIsIlN3aXBlclBvcHVwIiwiaW5kZXgiLCJfd3JhcHBlciIsInBhcmVudCIsIl9nYWxsZXJ5V3JhcCIsInBhcmVudHMiLCJfaHRtbCIsIl93aW5kb3ciLCJ3aW5kb3ciLCJfbGlua3MiLCJfcG9wdXAiLCJfcG9wdXBJbm5lciIsIl9wb3B1cENsb3NlIiwiX3N3aXBlcldyYXBwZXIiLCJfc3dpcGVyQ29udGFpbmVyIiwiX3N3aXBlclBhZ2luYXRpb24iLCJfc3dpcGVyQnRuTmV4dCIsIl9zd2lwZXJCdG5QcmV2IiwiX3N3aXBlciIsIl9hZGRFdmVudHMiLCJyZXNpemUiLCJfc2V0UGljdHVyZVNpemVXaGVuUmVzaXplIiwiY2xpY2siLCJfY2xvc2VQb3B1cCIsImV2ZW50Iiwic3RvcFByb3BhZ2F0aW9uIiwiX2FkZGluZ1ZhcmlhYmxlcyIsImF0dHIiLCJfYnVpbGRQb3B1cCIsIl9jb250ZW50RmlsbGluZyIsIl9pbml0U3dpcGVyIiwic2xpZGVUbyIsIl9zZXRTdHlsZXMiLCJvblJlc2l6ZSIsInNldFRpbWVvdXQiLCJvdmVyZmxvdyIsInBhZGRpbmdSaWdodCIsInJlbW92ZSIsImlubmVyQ29udGVudCIsImRhdGFTUkMiLCJwcmVsb2FkZXIiLCJuZXdJdGVtIiwiZGF0YSIsImFwcGVuZCIsImxvYWQiLCJ3aWR0aCIsImhlaWdodCIsIl9zZXRQaWN0dXJlU2l6ZSIsIl9nZXRTY3JvbGxXaWR0aCIsInNjcm9sbERpdiIsImRvY3VtZW50IiwiY3JlYXRlRWxlbWVudCIsInNjcm9sbGJhcldpZHRoIiwiYm9keSIsImFwcGVuZENoaWxkIiwib2Zmc2V0V2lkdGgiLCJjbGllbnRXaWR0aCIsInJlbW92ZUNoaWxkIiwicGFnaW5hdGlvbiIsIm5leHRCdXR0b24iLCJwcmV2QnV0dG9uIiwic2xpZGVzUGVyVmlldyIsInBhZ2luYXRpb25DbGlja2FibGUiLCJwaWNXaWR0aCIsInBpY0hlaWdodCIsInBpYyIsImsiXSwibWFwcGluZ3MiOiJDQUFBLFdBRUlBLEVBQUcsV0FFQ0EsRUFBRUMsS0FBTUQsRUFBRyxTQUFXLFdBQ2xCLEdBQUlFLEdBQU9GLEVBQUdHLFNBR2xCSCxFQUFFQyxLQUFNRCxFQUFHLFNBQVcsV0FDbEIsR0FBSUksR0FBVUosRUFBR0csU0FHckJILEVBQUVDLEtBQU1ELEVBQUcsZ0JBQWtCLFdBRXpCLEdBQUlLLEdBQVFMLEVBQUdHLFNBSW5CSCxFQUFFQyxLQUFNRCxFQUFHLFlBQWMsV0FFckIsR0FBSU0sR0FBZ0JOLEVBQUdHLFVBTS9CLElBQUlFLEdBQVEsU0FBVUUsR0FFbEIsR0FBSUMsR0FBUUwsS0FDUk0sRUFBT0Ys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cEJqQixPQUFVb0IsRUFBRUYsRUFBVSxPQU1sQzNDLEVBQTRCLFdBRXhCN0UsRUFBRUMsS0FBTW9FLEVBQWVuRCxLQUFNLE9BQVMsV0FFbENxRixFQUFpQnZHLEVBQUdHLE1BQU8rRixLQUFNLFNBQVdsRyxFQUFHRyxNQUFPK0YsS0FBTSxVQUFZbEcsRUFBR0csVUFLbkZxRixFQUFhLFdBRVQxQixFQUFNaEMsS0FDRjZELFNBQVUsU0FDVkMsYUFBY1ksTUFLMUIxRiIsImZpbGUiOiJnYWxsZXJ5Lm1pbi5qcyIsInNvdXJjZXNDb250ZW50IjpbIiggZnVuY3Rpb24oKXtcclxuXHJcbiAgICAkKCBmdW5jdGlvbigpe1xyXG5cclxuICAgICAgICAkLmVhY2goICQoICcubWVudScgKSwgZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgIG5ldyBNZW51ICggJCggdGhpcyApICk7XHJcbiAgICAgICAgfSApO1xyXG5cclxuICAgICAgICAkLmVhY2goICQoICcuaGVybycgKSwgZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgIG5ldyBTbGlkZXJzICggJCggdGhpcyApICk7XHJcbiAgICAgICAgfSApO1xyXG5cclxuICAgICAgICAkLmVhY2goICQoICcuc2l0ZV9fYXNpZGUnICksIGZ1bmN0aW9uKCl7XHJcblxyXG4gICAgICAgICAgICBuZXcgQXNpZGUgKCAkKCB0aGlzICkgKVxyXG5cclxuICAgICAgICB9ICk7XHJcblxyXG4gICAgICAgICQuZWFjaCggJCggJy5jb250ZW50JyApLCBmdW5jdGlvbigpe1xyXG5cclxuICAgICAgICAgICAgbmV3IENvbnRlbnRTY3JvbGwgKCAkKCB0aGlzICkgKVxyXG5cclxuICAgICAgICB9ICk7XHJcblxyXG4gICAgfSApO1xyXG5cclxuICAgIHZhciBBc2lkZSA9IGZ1bmN0aW9uKCBvYmogKSB7XHJcblxyXG4gICAgICAgIHZhciBfc2VsZiA9IHRoaXMsXHJcbiAgICAgICAgICAgIF9vYmogPSBvYmo7XHJcblxyXG4gICAgICAgIHZhciBfb25FdmVudHMgPSBmdW5jdGlvbiAoKSB7XHJcblxyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICBfaW5pdFNjcm9sbCA9IGZ1bmN0aW9uICgpIHtcclxuXHJcbiAgICAgICAgICAgICAgICBfb2JqLnBlcmZlY3RTY3JvbGxiYXIoICk7XHJcblxyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICBfdXBkYXRlU2Nyb2xsID0gZnVuY3Rpb24gKCkge1xyXG5cclxuICAgICAgICAgICAgICAgIF9vYmoucGVyZmVjdFNjcm9sbGJhciggJ3VwZGF0ZScgKTtcclxuXHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIF9pbml0ID0gZnVuY3Rpb24gKCkge1xyXG5cclxuICAgICAgICAgICAgICAgIF9vbkV2ZW50cygpO1xyXG4gICAgICAgICAgICAgICAgX2luaXRTY3JvbGwoKTtcclxuICAgICAgICAgICAgICAgIF9vYmpbMF0ub2JqID0gX3NlbGY7XHJcblxyXG4gICAgICAgICAgICB9O1xyXG5cclxuICAgICAgICAvL3B1YmxpYyBtZXRob2RzXHJcbiAgICAgICAgX3NlbGYudXBkYXRlU2Nyb2xsID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICBfdXBkYXRlU2Nyb2xsKCk7XHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgX2luaXQoKTtcclxuXHJcbiAgICB9O1xyXG5cclxuICAgIHZhciBDb250ZW50U2Nyb2xsID0gZnVuY3Rpb24oIG9iaiApIHtcclxuXHJcbiAgICAgICAgdmFyIF9vYmogPSBvYmo7XHJcblxyXG4gICAgICAgIHZhciBfb25FdmVudHMgPSBmdW5jdGlvbiAoKSB7XHJcblxyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICBfaW5pdFNjcm9sbCA9IGZ1bmN0aW9uICgpIHtcclxuXHJcbiAgICAgICAgICAgICAgICBfb2JqLnBlcmZlY3RTY3JvbGxiYXIoICk7XHJcblxyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICBfaW5pdCA9IGZ1bmN0aW9uICgpIHtcclxuXHJcbiAgICAgICAgICAgICAgICBfb25FdmVudHMoKTtcclxuICAgICAgICAgICAgICAgIF9pbml0U2Nyb2xsKCk7XHJcblxyXG4gICAgICAgICAgICB9O1xyXG5cclxuICAgICAgICBfaW5pdCgpO1xyXG5cclxuICAgIH07XHJcblxyXG4gICAgdmFyIE1lbnUgPSBmdW5jdGlvbiggb2JqICl7XHJcblxyXG4gICAgICAgIC8vcHJpdmF0ZSBwcm9wZXJ0aWVzXHJcbiAgICAgICAgdmFyIF9vYmogPSBvYmosXHJcbiAgICAgICAgICAgIF9idG4gPSAkKCAnLm1lbnUtbW9iaWxlLWJ0bicgKSxcclxuICAgICAgICAgICAgX21lbnVMaW5rID0gX29iai5maW5kKCAnYScgKSxcclxuICAgICAgICAgICAgX21lbnVTdWJNZW51ID0gX29iai5maW5kKCAnLm1lbnVfX3N1Yi1tZW51JyApLFxyXG4gICAgICAgICAgICBfYm9keSA9ICQoICdib2R5JyApLFxyXG4gICAgICAgICAgICBfc2l0ZSA9ICQoICcuc2l0ZScgKTtcclxuXHJcbiAgICAgICAgLy9wcml2YXRlIG1ldGhvZHNcclxuICAgICAgICB2YXIgX2NvbnN0cnVjdG9yID0gZnVuY3Rpb24oKXtcclxuICAgICAgICAgICAgICAgIF9vbkV2ZW50cygpO1xyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICBfb25FdmVudHMgPSBmdW5jdGlvbigpe1xyXG5cclxuICAgICAgICAgICAgICAgIF9zaXRlLm9uKFxyXG4gICAgICAgICAgICAgICAgICAgICdjbGljaycsIGZ1bmN0aW9uICggZSApIHtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICggX21lbnVMaW5rLmhhc0NsYXNzKCAnb3BlbicgKSAmJiAkKCBlLnRhcmdldCApLmNsb3Nlc3QoIF9vYmogKS5sZW5ndGggPT0gMCApe1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIF9tZW51TGluay5yZW1vdmVDbGFzcyggJ29wZW4nICk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBfbWVudVN1Yk1lbnUuY3NzKCAnaGVpZ2h0JywgMCApO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICApO1xyXG5cclxuICAgICAgICAgICAgICAgIF9idG4ub24oICdjbGljaycsIGZ1bmN0aW9uKCkge1xyXG5cclxuICAgICAgICAgICAgICAgICAgICB2YXIgY3VyQnRuID0gJCggdGhpcyApO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICBpZiAoIGN1ckJ0bi5oYXNDbGFzcyggJ2Nsb3NlJyApICl7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIF9jbG9zZU1lbnUoKTtcclxuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBfb3Blbk1lbnUoKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgfSApO1xyXG5cclxuICAgICAgICAgICAgICAgIF9tZW51TGluay5vbiggJ2NsaWNrJywgZnVuY3Rpb24oKSB7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIHZhciBjdXJMaW5rID0gJCggdGhpcyApLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBjdXJTdWJNZW51ID0gJCggdGhpcyApLm5leHQoICdkaXYnICk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGlmICggY3VyTGluay5uZXh0KCkuaXMoICdkaXYnICkgJiYgIWN1ckxpbmsuaGFzQ2xhc3MoICdvcGVuJyApICl7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIF9vcGVuU3ViTWVudSggY3VyTGluaywgY3VyU3ViTWVudSApO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmICggY3VyTGluay5uZXh0KCkuaXMoICdkaXYnICkgJiYgY3VyTGluay5oYXNDbGFzcyggJ29wZW4nICkgKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIF9jbG9zZVN1Yk1lbnUoIGN1ckxpbmssIGN1clN1Yk1lbnUgKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICB9ICk7XHJcblxyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICBfb3Blbk1lbnUgPSBmdW5jdGlvbigpe1xyXG4gICAgICAgICAgICAgICAgX2J0bi5hZGRDbGFzcyggJ2Nsb3NlJyApO1xyXG4gICAgICAgICAgICAgICAgX29iai5hZGRDbGFzcyggJ3Zpc2libGUnICk7XHJcbiAgICAgICAgICAgICAgICBfYm9keS5jc3MoICdvdmVyZmxvdy15JywgJ2hpZGRlbicgKTtcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgX2Nsb3NlTWVudSA9IGZ1bmN0aW9uKCl7XHJcbiAgICAgICAgICAgICAgICBfYnRuLnJlbW92ZUNsYXNzKCAnY2xvc2UnICk7XHJcbiAgICAgICAgICAgICAgICBfb2JqLnJlbW92ZUNsYXNzKCAndmlzaWJsZScgKTtcclxuICAgICAgICAgICAgICAgIF9ib2R5LmNzcyggJ292ZXJmbG93LXknLCAnYXV0bycgKTtcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgX29wZW5TdWJNZW51ID0gZnVuY3Rpb24gKCBidG4sIHN1Yk1lbnUgKSB7XHJcblxyXG4gICAgICAgICAgICAgICAgdmFyIGN1ckJ0biA9IGJ0bixcclxuICAgICAgICAgICAgICAgICAgICBjdXJTdWJNZW51ID0gc3ViTWVudSxcclxuICAgICAgICAgICAgICAgICAgICBjdXJTdWJNZW51SGVpZ2h0ID0gY3VyU3ViTWVudS5maW5kKCAndWwnICkub3V0ZXJIZWlnaHQoKTtcclxuXHJcbiAgICAgICAgICAgICAgICBjdXJCdG4uYWRkQ2xhc3MoICdvcGVuJyApO1xyXG4gICAgICAgICAgICAgICAgY3VyU3ViTWVudS5jc3MoICdoZWlnaHQnLCBjdXJTdWJNZW51SGVpZ2h0ICk7XHJcblxyXG4gICAgICAgICAgICAgICAgJCggJy5zaXRlX19hc2lkZScgKVswXS5vYmoudXBkYXRlU2Nyb2xsKCk7XHJcblxyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICBfY2xvc2VTdWJNZW51ID0gZnVuY3Rpb24gKCBidG4sIHN1Yk1lbnUgKSB7XHJcblxyXG4gICAgICAgICAgICAgICAgdmFyIGN1ckJ0biA9IGJ0bixcclxuICAgICAgICAgICAgICAgICAgICBjdXJTdWJNZW51ID0gc3ViTWVudTtcclxuXHJcbiAgICAgICAgICAgICAgICBjdXJCdG4ucmVtb3ZlQ2xhc3MoICdvcGVuJyApO1xyXG4gICAgICAgICAgICAgICAgY3VyU3ViTWVudS5jc3MoICdoZWlnaHQnLCAwICk7XHJcblxyXG4gICAgICAgICAgICB9O1xyXG5cclxuICAgICAgICAvL3B1YmxpYyBwcm9wZXJ0aWVzXHJcblxyXG4gICAgICAgIC8vcHVibGljIG1ldGhvZHNcclxuXHJcbiAgICAgICAgX2NvbnN0cnVjdG9yKCk7XHJcblxyXG4gICAgfTtcclxuXHJcbiAgICB2YXIgU2xpZGVycyA9IGZ1bmN0aW9uKCBvYmogKSB7XHJcblxyXG4gICAgICAgIC8vcHJpdmF0ZSBwcm9wZXJ0aWVzXHJcbiAgICAgICAgdmFyIF9vYmogPSBvYmosXHJcbiAgICAgICAgICAgIF9oZXJvU2xpZGVyID0gX29iai5maW5kKCAnLmhlcm9fX3N3aXBlcicgKSxcclxuICAgICAgICAgICAgX2hlcm87XHJcblxyXG4gICAgICAgIC8vcHJpdmF0ZSBtZXRob2RzXHJcbiAgICAgICAgdmFyIF9pbml0U2xpZGVyID0gZnVuY3Rpb24oKSB7XHJcblxyXG4gICAgICAgICAgICAgICAgX2hlcm8gPSBuZXcgU3dpcGVyICggX2hlcm9TbGlkZXIsIHtcclxuICAgICAgICAgICAgICAgICAgICBhdXRvcGxheTogMTAwMDAsXHJcbiAgICAgICAgICAgICAgICAgICAgc3BlZWQ6IDUwMCxcclxuICAgICAgICAgICAgICAgICAgICBlZmZlY3Q6ICdmYWRlJyxcclxuICAgICAgICAgICAgICAgICAgICBsb29wOiB0cnVlXHJcbiAgICAgICAgICAgICAgICB9ICk7XHJcblxyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICBfb25FdmVudCA9IGZ1bmN0aW9uKCkge1xyXG5cclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgX2NvbnN0cnVjdCA9IGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICAgICAgX29uRXZlbnQoKTtcclxuICAgICAgICAgICAgICAgIF9pbml0U2xpZGVyKCk7XHJcbiAgICAgICAgICAgIH07XHJcblxyXG4gICAgICAgIC8vcHVibGljIHByb3BlcnRpZXNcclxuXHJcbiAgICAgICAgLy9wdWJsaWMgbWV0aG9kc1xyXG5cclxuICAgICAgICBfY29uc3RydWN0KCk7XHJcbiAgICB9O1xyXG5cclxufSApKCk7IiwiKCBmdW5jdGlvbigpe1xyXG5cclxuICAgIFwidXNlIHN0cmljdFwiO1xyXG5cclxuICAgICQoZnVuY3Rpb24gKCkge1xyXG5cclxuICAgICAgICAkLmVhY2goICQoICcubWVkaWEtZ2FsbGVyeV92aWV3JyApLCBmdW5jdGlvbigpe1xyXG5cclxuICAgICAgICAgICAgbmV3IE1lZGlhR2FsbGVyeSAoICQoIHRoaXMgKSApXHJcblxyXG4gICAgICAgIH0gKTtcclxuXHJcbiAgICB9ICk7XHJcblxyXG4gICAgdmFyIE1lZGlhR2FsbGVyeSA9IGZ1bmN0aW9uKCBvYmogKSB7XHJcblxyXG4gICAgICAgIHZhciBfb2JqID0gb2JqO1xyXG5cclxuICAgICAgICB2YXIgX29uRXZlbnRzID0gZnVuY3Rpb24gKCkge1xyXG5cclxuICAgICAgICAgICAgICAgIF9vYmoub24oICdjbGljaycsICcubWVkaWEtZ2FsbGVyeV9faXRlbScsIGZ1bmN0aW9uKCkge1xyXG5cclxuICAgICAgICAgICAgICAgICAgICBTd2lwZXJQb3B1cCggJCggdGhpcyApLCAkKCB0aGlzICkuaW5kZXgoKSApO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcblxyXG4gICAgICAgICAgICAgICAgfSApO1xyXG5cclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgX2luaXQgPSBmdW5jdGlvbiAoKSB7XHJcblxyXG4gICAgICAgICAgICAgICAgX29uRXZlbnRzKCk7XHJcblxyXG4gICAgICAgICAgICB9O1xyXG5cclxuICAgICAgICBfaW5pdCgpO1xyXG5cclxuICAgIH07XHJcblxyXG4gICAgdmFyIFN3aXBlclBvcHVwID0gZnVuY3Rpb24gKCBvYmosIGluZGV4ICkge1xyXG5cclxuICAgICAgICB2YXIgX3NlbGYgPSB0aGlzLFxyXG4gICAgICAgICAgICBfb2JqID0gb2JqLFxyXG4gICAgICAgICAgICBfYm9keSA9ICQoICdib2R5JyApLFxyXG4gICAgICAgICAgICBfd3JhcHBlciA9IF9vYmoucGFyZW50KCksXHJcbiAgICAgICAgICAgIF9nYWxsZXJ5V3JhcCA9IF9vYmoucGFyZW50cyggJy5tZWRpYS1nYWxsZXJ5JyApLFxyXG4gICAgICAgICAgICBfaHRtbCA9ICQoICdodG1sJyApLFxyXG4gICAgICAgICAgICBfd2luZG93ID0gJCggd2luZG93ICksXHJcbiAgICAgICAgICAgIF9saW5rcyA9IF93cmFwcGVyLmZpbmQoICcubWVkaWEtZ2FsbGVyeV9faXRlbScgKSxcclxuICAgICAgICAgICAgX3BvcHVwID0gbnVsbCxcclxuICAgICAgICAgICAgX3BvcHVwSW5uZXIgPSBudWxsLFxyXG4gICAgICAgICAgICBfcG9wdXBDbG9zZSA9IG51bGwsXHJcbiAgICAgICAgICAgIF9zd2lwZXJXcmFwcGVyID0gbnVsbCxcclxuICAgICAgICAgICAgX3N3aXBlckNvbnRhaW5lciA9IG51bGwsXHJcbiAgICAgICAgICAgIF9zd2lwZXJQYWdpbmF0aW9uID0gbnVsbCxcclxuICAgICAgICAgICAgX3N3aXBlckJ0bk5leHQgPSBudWxsLFxyXG4gICAgICAgICAgICBfc3dpcGVyQnRuUHJldiA9IG51bGwsXHJcbiAgICAgICAgICAgIF9zd2lwZXIgPSBudWxsO1xyXG5cclxuICAgICAgICB2YXIgX2FkZEV2ZW50cyA9IGZ1bmN0aW9uKCl7XHJcblxyXG4gICAgICAgICAgICAgICAgX3dpbmRvdy5vbih7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIHJlc2l6ZTogZnVuY3Rpb24gKCl7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICBfc2V0UGljdHVyZVNpemVXaGVuUmVzaXplKCk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgICAgICBfcG9wdXBJbm5lci5wYXJlbnQoKS5vbih7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGNsaWNrOiBmdW5jdGlvbigpe1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgX2Nsb3NlUG9wdXAoKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgICAgICAgIF9wb3B1cElubmVyLm9uKHtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgY2xpY2s6IGZ1bmN0aW9uKCBldmVudCApe1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgZXZlbnQuc3RvcFByb3BhZ2F0aW9uKCk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgICAgICBfcG9wdXBDbG9zZS5vbih7XHJcbiAgICAgICAgICAgICAgICAgICAgY2xpY2s6IGZ1bmN0aW9uKCl7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICBfY2xvc2VQb3B1cCgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH0pXHJcblxyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICBfYWRkaW5nVmFyaWFibGVzID0gZnVuY3Rpb24oKXtcclxuXHJcbiAgICAgICAgICAgICAgICB2YXIgdHlwZSA9IF9nYWxsZXJ5V3JhcC5hdHRyKCAnZGF0YS1sb2FkZWQtdHlwZScgKTtcclxuXHJcbiAgICAgICAgICAgICAgICBfcG9wdXAgPSAkKCAnPGRpdiBjbGFzcz1cInN3aXBlci1wb3B1cFwiPlxcXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJzd2lwZXItY29udGFpbmVyXCI+XFxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJzd2lwZXItd3JhcHBlclwiPjwvZGl2PlxcXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwic3dpcGVyLXBhZ2luYXRpb25cIj48L2Rpdj5cXFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cInN3aXBlci1idXR0b24tbmV4dFwiPjwvZGl2PlxcXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwic3dpcGVyLWJ1dHRvbi1wcmV2XCI+PC9kaXY+XFxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XFxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj4nICk7XHJcbiAgICAgICAgICAgICAgICBfc3dpcGVyV3JhcHBlciA9IF9wb3B1cC5maW5kKCAnLnN3aXBlci13cmFwcGVyJyApO1xyXG4gICAgICAgICAgICAgICAgX3N3aXBlckNvbnRhaW5lciA9IF9wb3B1cC5maW5kKCAnLnN3aXBlci1jb250YWluZXInICk7XHJcbiAgICAgICAgICAgICAgICBfc3dpcGVyUGFnaW5hdGlvbiA9IF9wb3B1cC5maW5kKCAnLnN3aXBlci1wYWdpbmF0aW9uJyApO1xyXG4gICAgICAgICAgICAgICAgX3N3aXBlckJ0bk5leHQgPSBfcG9wdXAuZmluZCggJy5zd2lwZXItYnV0dG9uLW5leHQnICk7XHJcbiAgICAgICAgICAgICAgICBfc3dpcGVyQnRuUHJldiA9IF9wb3B1cC5maW5kKCAnLnN3aXBlci1idXR0b24tcHJldicgKTtcclxuXHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIF9idWlsZFBvcHVwID0gZnVuY3Rpb24oKXtcclxuXHJcbiAgICAgICAgICAgICAgICBfYWRkaW5nVmFyaWFibGVzKCk7XHJcbiAgICAgICAgICAgICAgICBfY29udGVudEZpbGxpbmcoKTtcclxuICAgICAgICAgICAgICAgIF9pbml0U3dpcGVyKCk7XHJcbiAgICAgICAgICAgICAgICBfc3dpcGVyLnNsaWRlVG8oIGluZGV4LCAwICk7XHJcbiAgICAgICAgICAgICAgICBfcG9wdXAuYWRkQ2xhc3MoICdhY3RpdmUnICk7XHJcbiAgICAgICAgICAgICAgICBfc2V0U3R5bGVzKCk7XHJcbiAgICAgICAgICAgICAgICBfc3dpcGVyLm9uUmVzaXplKCk7XHJcblxyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICBfY2xvc2VQb3B1cCA9IGZ1bmN0aW9uKCl7XHJcblxyXG4gICAgICAgICAgICAgICAgX3BvcHVwLnJlbW92ZUNsYXNzKCAnYWN0aXZlJyApO1xyXG4gICAgICAgICAgICAgICAgc2V0VGltZW91dCggZnVuY3Rpb24oKXtcclxuICAgICAgICAgICAgICAgICAgICBfaHRtbC5jc3Moe292ZXJmbG93OiAnJywgcGFkZGluZ1JpZ2h0OiAnJ30pO1xyXG4gICAgICAgICAgICAgICAgICAgIF9wb3B1cC5yZW1vdmUoKTtcclxuICAgICAgICAgICAgICAgIH0sIDMwMCApO1xyXG5cclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgX2NvbnRlbnRGaWxsaW5nID0gZnVuY3Rpb24oKXtcclxuXHJcbiAgICAgICAgICAgICAgICAkLmVhY2goIF9saW5rcywgZnVuY3Rpb24oKXtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIGlubmVyQ29udGVudCA9IG51bGwsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGRhdGFTUkMgPSBudWxsLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBwcmVsb2FkZXIgPSBudWxsO1xyXG5cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgcHJlbG9hZGVyID0gJyc7XHJcbiAgICAgICAgICAgICAgICAgICAgaW5uZXJDb250ZW50ID0gJzxpbWcgc3JjPVwiJyArICQodGhpcykuYXR0ciggXCJocmVmXCIgKSArICdcIj4nO1xyXG4gICAgICAgICAgICAgICAgICAgIGRhdGFTUkMgPSAnJztcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIG5ld0l0ZW0gPSAkKCAnPGRpdiBjbGFzcz1cInN3aXBlci1zbGlkZVwiPlxcXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwic3dpcGVyLXBvcHVwX19pbm5lclwiICcgKyBkYXRhU1JDICsgJz5cXFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxhIGhyZWY9XCIjXCIgY2xhc3M9XCJzd2lwZXItcG9wdXBfX2Nsb3NlXCI+PC9hPlxcXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJyArIHByZWxvYWRlciArICdcXFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICcgKyBpbm5lckNvbnRlbnQgKyAnXFxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8c3BhbiBjbGFzcz1cInN3aXBlci1zbGlkZV9fdGl0bGVcIj4nICsgJCggdGhpcyApLmRhdGEoICd0aXRsZScgKSArICc8L3NwYW4+XFxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxcXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PicgKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgX3N3aXBlcldyYXBwZXIuYXBwZW5kKCBuZXdJdGVtICk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIG5ld0l0ZW0uZmluZCggJ2ltZycgKS5vbigge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBsb2FkOiBmdW5jdGlvbigpe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJCggdGhpcyApLmF0dHIoICdkYXRhLXdpZHRoJywgdGhpcy53aWR0aCApO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJCggdGhpcyApLmF0dHIoICdkYXRhLWhlaWdodCcsIHRoaXMuaGVpZ2h0ICk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBfc2V0UGljdHVyZVNpemUoIHRoaXMud2lkdGgsIHRoaXMuaGVpZ2h0LCAkKCB0aGlzICkgKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIH0gKTtcclxuXHJcbiAgICAgICAgICAgICAgICB9ICk7XHJcblxyXG4gICAgICAgICAgICAgICAgX2JvZHkuYXBwZW5kKCBfcG9wdXAgKTtcclxuXHJcbiAgICAgICAgICAgICAgICBfcG9wdXBJbm5lciA9IF9wb3B1cC5maW5kKCAnLnN3aXBlci1wb3B1cF9faW5uZXInICk7XHJcbiAgICAgICAgICAgICAgICBfcG9wdXBDbG9zZSA9IF9wb3B1cC5maW5kKCAnLnN3aXBlci1wb3B1cF9fY2xvc2UnICk7XHJcblxyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICBfZ2V0U2Nyb2xsV2lkdGggPSBmdW5jdGlvbiAoKXtcclxuICAgICAgICAgICAgICAgIHZhciBzY3JvbGxEaXYgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCAnZGl2JyApLFxyXG4gICAgICAgICAgICAgICAgICAgIHNjcm9sbGJhcldpZHRoID0gbnVsbDtcclxuICAgICAgICAgICAgICAgIGRvY3VtZW50LmJvZHkuYXBwZW5kQ2hpbGQoIHNjcm9sbERpdiApO1xyXG4gICAgICAgICAgICAgICAgc2Nyb2xsYmFyV2lkdGggPSBzY3JvbGxEaXYub2Zmc2V0V2lkdGggLSBzY3JvbGxEaXYuY2xpZW50V2lkdGg7XHJcbiAgICAgICAgICAgICAgICBkb2N1bWVudC5ib2R5LnJlbW92ZUNoaWxkKCBzY3JvbGxEaXYgKTtcclxuICAgICAgICAgICAgICAgIHJldHVybiBzY3JvbGxiYXJXaWR0aDtcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgX2luaXRTd2lwZXIgPSBmdW5jdGlvbigpe1xyXG5cclxuICAgICAgICAgICAgICAgIF9zd2lwZXIgPSBuZXcgU3dpcGVyKCBfc3dpcGVyQ29udGFpbmVyLCB7XHJcbiAgICAgICAgICAgICAgICAgICAgcGFnaW5hdGlvbjogX3N3aXBlclBhZ2luYXRpb24sXHJcbiAgICAgICAgICAgICAgICAgICAgbmV4dEJ1dHRvbjogX3N3aXBlckJ0bk5leHQsXHJcbiAgICAgICAgICAgICAgICAgICAgcHJldkJ1dHRvbjogX3N3aXBlckJ0blByZXYsXHJcbiAgICAgICAgICAgICAgICAgICAgc2xpZGVzUGVyVmlldzogMSxcclxuICAgICAgICAgICAgICAgICAgICBwYWdpbmF0aW9uQ2xpY2thYmxlOiB0cnVlXHJcbiAgICAgICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIF9pbml0ID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgX2J1aWxkUG9wdXAoKTtcclxuICAgICAgICAgICAgICAgIF9hZGRFdmVudHMoKTtcclxuICAgICAgICAgICAgICAgIF9vYmpbIDAgXS5vYmogPSBfc2VsZjtcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgX3NldFBpY3R1cmVTaXplID0gZnVuY3Rpb24oIHBpY1dpZHRoLCBwaWNIZWlnaHQsIHBpYyApe1xyXG5cclxuICAgICAgICAgICAgICAgIHZhciBrID0gMDtcclxuXHJcbiAgICAgICAgICAgICAgICBpZiAoICggX3BvcHVwLndpZHRoKCkvcGljV2lkdGggKSA+ICggX3BvcHVwLmhlaWdodCgpL3BpY0hlaWdodCApICkge1xyXG4gICAgICAgICAgICAgICAgICAgIGsgPSBfcG9wdXAuaGVpZ2h0KCkvcGljSGVpZ2h0IDtcclxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgayA9IF9wb3B1cC53aWR0aCgpL3BpY1dpZHRoO1xyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIGlmICggayA+PSAxICl7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIHBpYy5jc3Moe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBcIndpZHRoXCI6IHBpY1dpZHRoKjAuODUsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIFwiaGVpZ2h0XCI6IHBpY0hlaWdodCowLjg1XHJcbiAgICAgICAgICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgcGljLmNzcyh7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIFwid2lkdGhcIjogaypwaWNXaWR0aCowLjg1LFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBcImhlaWdodFwiOiBrKnBpY0hlaWdodCowLjg1XHJcbiAgICAgICAgICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgX3NldFBpY3R1cmVTaXplV2hlblJlc2l6ZSA9IGZ1bmN0aW9uKCl7XHJcblxyXG4gICAgICAgICAgICAgICAgJC5lYWNoKCBfc3dpcGVyV3JhcHBlci5maW5kKCAnaW1nJyApLCBmdW5jdGlvbiAoKSB7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIF9zZXRQaWN0dXJlU2l6ZSggJCggdGhpcyApLmRhdGEoICd3aWR0aCcgKSwgJCggdGhpcyApLmRhdGEoICdoZWlnaHQnICksICQoIHRoaXMgKSApO1xyXG5cclxuICAgICAgICAgICAgICAgIH0gKTtcclxuXHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIF9zZXRTdHlsZXMgPSBmdW5jdGlvbigpe1xyXG5cclxuICAgICAgICAgICAgICAgIF9odG1sLmNzcyh7XHJcbiAgICAgICAgICAgICAgICAgICAgb3ZlcmZsb3c6ICdoaWRkZW4nLFxyXG4gICAgICAgICAgICAgICAgICAgIHBhZGRpbmdSaWdodDogX2dldFNjcm9sbFdpZHRoKClcclxuICAgICAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgICAgfTtcclxuXHJcbiAgICAgICAgX2luaXQoKTtcclxuXHJcbiAgICB9O1xyXG5cclxufSApKCk7XHJcbiJdfQ==
